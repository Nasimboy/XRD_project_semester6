\subsection[Data collection and indexing (an overview)]{Experimentation, data collection and refinement, and indexing --- \\a preliminary overview}

At the time of writing, there are two major diffractometer manufacturers in the world:%
%	
	\begin{itemize}%
%	
	    \item Bruker Axs, and
	    
	    \item Rigaku Oxford Diffraction.
	    
	\end{itemize}
	
Both of these manufacturers provide single crystal as well as powder X-ray diffractometers. They have their own software for controlling the diffractometers during the experiment, as well as for analysis, indexing and structure solution of the data recorded by it.

Data refinement and structure solution are done through pre-programmed software nowadays, and it would really not be possible to go into the full details of each and every software and how data refinement and structure indexing are done. We are going to scratch the surface and very briefly mention an approximate procedure that is followed; for details, the reader is advised to go through any books dealing in X-ray crystallography from the experimental aspect, like \cite{Cullity2014}. The procedure that we mention is primarily taken from \cite{Chowdhury2022} and based on a 4-circle single crystal diffractometer from Rigaku Oxford Diffraction, which also has a cryosystem from Oxford Cryosystems for maintaining the temperature of the crystal at cryogenic scales, if necessary, and a $CO_2$ laser for carrying out in situ crystallization.

All diffractometers come with an optical microscope and a video camera through which the crystal can be viewed in a software. The first step after mounting the crystal is \bfnt{centring the crystal}. This is highly essential and should be done precisely, because during the experiment, the crystal would be rotated through various angles, and it is necessary to make sure that there is no position in which the crystal does not receive the X-ray beam. The crystal is rotated through the centre, left, right and top orientations (w.r.t. the microscope) using the control software, and the screws on the goniometer head are used to move the crystal, which is again observed on the software to make sure that the crystal is centred.

Next step is to capture a \bfnt{rotation photograph}. For this, we use a preset zero position, select $\phi$ to be rotated through $2\pi,$ and record the data.

Based on the rotation photograph generated by the software, we may have to change the exposure time if spots are overlapped. To do this, we take a still photograph of a certain exposure time and check if the spots are well separated.

After finding a good exposure time, we again execute a preset scanning strategy to collect three sets with 20-30 frames each for \bfnt{unit cell determination}. The strategies are calculated such that at least three regions of the reciprocal lattice are scanned for precise measurement of the unit cell. The indexed percentage is important because anything below 60\% indexed is not acceptable, while a value above 80\% is considered to be good. Once the recording is over, we choose an appropriate value of mean~$I/\sigma$ (signal to noise ratio) to include lower intensity spots, as needed, and ``harvest'' the spots. We use different methods like difference vectors, FFT and least squares on the chosen reflections, and proceed to determine the unit cell parameters.

The software gives us the unit cell parameters calculated using the chosen methods, along with a score. If the data is good, the three methods should give nearly the same values, though the determined unit cell might be different. We choose the algorithm that has the highest score, or the unit cell with the highest symmetry, and thereafter refine the data. We can decrease the tolerance if we want to include more number of reflections. At this stage, different histograms can be viewed. A single tall peak in the rotation angle histogram tells us that our crystal was properly centred, while a Gaussian-like distribution indicates that the centring was not perfect. Histograms can be viewed for $h$, $k$ and $\ell$ values, through which we can learn whether our crystal was truly a good single crystal. Thereafter, the software tells us the possible Bravais lattices with figures of merit for each.

Next, we refine the data once again. At this stage, we can \bfnt{view the reflections on the reciprocal lattice} using the ``Reciprocal lattice viewer". For a good single crystal, the spots should appear perfectly aligned with each other in a grid when viewed along the three reciprocal lattice axes. We can select and remove any spots that appear to be mis-aligned at this stage.

Now we are ready to collect the main data. We go to the ``Data Collection Strategy'' module, and choose the resolution that we want, and the symmetry. We can just choose between `chiral',  `centrosymmetry' and different Laue groups. The software also asks about the detector distance that should be used.

Based on our input, the software will compute the best data collection strategy, and present us with a number of runs. Each run collects data upto a certain completeness level, which is shown to us. If we set the frame width ($\Delta \omega$) and the exposure time, the software will also tell us how much time is needed for each of the runs. Each run sweeps a certain diffractometer axis with other axes fixed.

Now, we go to the ``Experiment'' module and ``Append'' the strategy. We must validate the strategies to make sure that the diffractometer collision limits are not exceeded. Once the strategies are validated, we can start the data collection.

The recorded data is stored in files such that each file corresponds to one frame. Two consecutive frames have a difference of $\Delta \omega.$ We open the \texttt{.par} file in a data management software like \texttt{Crys Alis Pro}. First, we re-calculate the unit cell parameters. Next, we view the spots in the reciprocal lattice viewer, and remove the sets of misaligned spots. In most cases, the software will already group the misaligned spots, and we just have to remove them by de-selecting the group.

Using this same software, we can perform data reduction using various strategies, and at the end of this process, the software will ask us to choose the lattice type and the space group from a set of options. We are also required to enter an approximate formula of the crystal molecule.

With all this data, the software completes the computation and generates a \texttt{Mercury} file (\texttt{Mercury} is a software from the Cambridge Structural Database). This file, which can also be opened on a text editor, contains all the required information about the crystal system.

For structure solution, we use the \texttt{Olex 2} software. This is outside the scope of this article.
